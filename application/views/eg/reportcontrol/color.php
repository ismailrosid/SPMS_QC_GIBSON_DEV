<table class="table" style="width:2500px;">
	<thead class="table_header_2">
		<tr>
			<th rowspan="2"><a href="#" onClick="_doPost('sSort', 'd_production_date', 'bSortAction')">Production Date</a></th>
			<th rowspan="2"><a href="#" onClick="_doPost('sSort', 'd_plan_date', 'bSortAction')">Production Plan Date (Input)</a></th>
			<th rowspan="2"><a href="#" onClick="_doPost('sSort', 'd_delivery_date', 'bSortAction')">Production Plan Date (Output)</a></th>
			<th rowspan="2"><a href="#" onClick="_doPost('sSort', 'd_target_date', 'bSortAction')">Export Plan Date</a></th>
			<th rowspan="2"><a href="#" onClick="_doPost('sSort', 's_buyer_name', 'bSortAction')">Buyer</a></th>
			<th rowspan="2"><a href="#" onClick="_doPost('sSort', 's_po_no', 'bSortAction')">PI Number</a></th>
			<th rowspan="2"><a href="#" onClick="_doPost('sSort', 's_po', 'bSortAction')">PO</a></th>
			<th rowspan="2"><a href="#" onClick="_doPost('sSort', 's_model', 'bSortAction')">Model</a></th>
			<th rowspan="2"><a href="#" onClick="_doPost('sSort', 's_model_name', 'bSortAction')">Model Name</a></th>
			<th rowspan="2"><a href="#" onClick="_doPost('sSort', 's_color_name', 'bSortAction')">Color</a></th>
			<th rowspan="2"><a href="#" onClick="_doPost('sSort', 's_smodel', 'bSortAction')">Item Code</a></th>
			<th rowspan="2"><a href="#" onClick="_doPost('sSort', 's_type_difficult', 'bSortAction')">Difficult</a></th>
			<th rowspan="2" width="70px"><a href="#" onClick="_doPost('sSort', 'n_qty', 'bSortAction')">Qty</a></th>
			<th colspan="3">WK-I Center Input</th>
			<th colspan="3">WK-I Center Output</th>
			<th colspan="3">WK-II</th>
			<th colspan="3">WK-II Control Center</th>
			<th colspan="3">Coating-I</th>
			<th colspan="3">Coating-IIA</th>
			<th colspan="3">Coating-IIB</th>
			<th colspan="3">Assembly-I_Control Center</th>
			<th colspan="3">Assembly-II</th>
			<th colspan="3">Packing</th>
			<th colspan="3">Warehouse Outgoing</th>
		</tr>
		<tr>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_1_plan', 'bSortAction')">Plan</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_1', 'bSortAction')">Actual</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 's_process_1_location', 'bSortAction')">Loc</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_2_plan', 'bSortAction')">Plan</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_2', 'bSortAction')">Actual</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 's_process_2_location', 'bSortAction')">Loc</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_3_plan', 'bSortAction')">Plan</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_3', 'bSortAction')">Actual</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 's_process_3_location', 'bSortAction')">Loc</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_4_plan', 'bSortAction')">Plan</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_4', 'bSortAction')">Actual</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 's_process_4_location', 'bSortAction')">Loc</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_5_plan', 'bSortAction')">Plan</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_5', 'bSortAction')">Actual</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 's_process_5_location', 'bSortAction')">Loc</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_6_plan', 'bSortAction')">Plan</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_6', 'bSortAction')">Actual</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 's_process_6_location', 'bSortAction')">Loc</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_7_plan', 'bSortAction')">Plan</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_7', 'bSortAction')">Actual</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 's_process_7_location', 'bSortAction')">Loc</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_8_plan', 'bSortAction')">Plan</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_8', 'bSortAction')">Actual</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 's_process_8_location', 'bSortAction')">Loc</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_9_plan', 'bSortAction')">Plan</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_9', 'bSortAction')">Actual</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 's_process_9_location', 'bSortAction')">Loc</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_10_plan', 'bSortAction')">Plan</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_10', 'bSortAction')">Actual</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 's_process_10_location', 'bSortAction')">Loc</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_14_plan', 'bSortAction')">Plan</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 'd_process_14', 'bSortAction')">Actual</a></th>
			<th width="70px"><a href="#" onClick="_doPost('sSort', 's_process_14_location', 'bSortAction')">Loc</a></th>
		</tr>
	</thead>
	<tbody>
<?php	foreach($tt_report as $nIndex=>$aValue) {
			$bValid = TRUE;
			if (!empty($aValue['d_process_1_plan']) && !empty($aValue['d_process_1']) && $aValue['d_process_1_plan'] != '1900-01-01' && $aValue['d_process_1'] != '1900-01-01'){
				if (strtotime($aValue['d_process_1']) > strtotime($aValue['d_process_1_plan'])) $bValid = FALSE;
			}
			if (!empty($aValue['d_process_2_plan']) && !empty($aValue['d_process_2']) && $aValue['d_process_2_plan'] != '1900-01-01' && $aValue['d_process_2'] != '1900-01-01'){
				if (strtotime($aValue['d_process_2']) > strtotime($aValue['d_process_2_plan'])) $bValid = FALSE;
			}
			if (!empty($aValue['d_process_3_plan']) && !empty($aValue['d_process_3']) && $aValue['d_process_3_plan'] != '1900-01-01' && $aValue['d_process_3'] != '1900-01-01'){
				if (strtotime($aValue['d_process_3']) > strtotime($aValue['d_process_3_plan'])) $bValid = FALSE;
			}
			if (!empty($aValue['d_process_4_plan']) && !empty($aValue['d_process_4']) && $aValue['d_process_4_plan'] != '1900-01-01' && $aValue['d_process_4'] != '1900-01-01'){
				if (strtotime($aValue['d_process_4']) > strtotime($aValue['d_process_4_plan'])) $bValid = FALSE;
			}
			if (!empty($aValue['d_process_5_plan']) && !empty($aValue['d_process_5']) && $aValue['d_process_5_plan'] != '1900-01-01' && $aValue['d_process_5'] != '1900-01-01'){
				if (strtotime($aValue['d_process_5']) > strtotime($aValue['d_process_5_plan'])) $bValid = FALSE;
			}
			if (!empty($aValue['d_process_6_plan']) && !empty($aValue['d_process_6']) && $aValue['d_process_6_plan'] != '1900-01-01' && $aValue['d_process_6'] != '1900-01-01'){
				if (strtotime($aValue['d_process_6']) > strtotime($aValue['d_process_6_plan'])) $bValid = FALSE;
			}
			if (!empty($aValue['d_process_7_plan']) && !empty($aValue['d_process_7']) && $aValue['d_process_7_plan'] != '1900-01-01' && $aValue['d_process_7'] != '1900-01-01'){
				if (strtotime($aValue['d_process_7']) > strtotime($aValue['d_process_7_plan'])) $bValid = FALSE;
			}
			if (!empty($aValue['d_process_8_plan']) && !empty($aValue['d_process_8']) && $aValue['d_process_8_plan'] != '1900-01-01' && $aValue['d_process_8'] != '1900-01-01'){
				if (strtotime($aValue['d_process_8']) > strtotime($aValue['d_process_8_plan'])) $bValid = FALSE;
			}
			if (!empty($aValue['d_process_9_plan']) && !empty($aValue['d_process_9']) && $aValue['d_process_9_plan'] != '1900-01-01' && $aValue['d_process_9'] != '1900-01-01'){
				if (strtotime($aValue['d_process_9']) > strtotime($aValue['d_process_9_plan'])) $bValid = FALSE;
			}
			if (!empty($aValue['d_process_10_plan']) && !empty($aValue['d_process_10']) && $aValue['d_process_10_plan'] != '1900-01-01' && $aValue['d_process_10'] != '1900-01-01'){
				if (strtotime($aValue['d_process_10']) > strtotime($aValue['d_process_10_plan'])) $bValid = FALSE;
			}
			if (!empty($aValue['d_process_14_plan']) && !empty($aValue['d_process_14']) && $aValue['d_process_14_plan'] != '1900-01-01' && $aValue['d_process_14'] != '1900-01-01'){
				if (strtotime($aValue['d_process_14']) > strtotime($aValue['d_process_14_plan'])) $bValid = FALSE;
			}
		?>
		<tr <?=(!$bValid ? 'style="background-color:#FF0000;"' : '')?>>
			<td><?=$aValue['d_production_date']?></td>
			<td><?=$aValue['d_plan_date']?></td>
			<td><?=$aValue['d_delivery_date']?></td>
			<td><?=$aValue['d_target_date']?></td>
			<td><?=$aValue['s_buyer_name']?></td>
			<td><?=$aValue['s_po_no']?></td>
			<td><?=$aValue['s_po']?></td>
			<td><?=$aValue['s_model']?></td>
			<td><?=$aValue['s_model_name']?></td>
			<td><?=$aValue['s_color_name']?></td>
			<td><?=$aValue['s_smodel']?></td>
			<td><?=$aValue['s_type_difficult']?></td>
			<td align="right"><?=$aValue['n_qty']?></td>
			<td align="center"><?=$aValue['d_process_1_plan']?></td>
			<td align="center"><?=$aValue['d_process_1']?></td>
			<td align="center"><?=$aValue['s_process_1_location']?></td>
			<td align="center"><?=$aValue['d_process_2_plan']?></td>
			<td align="center"><?=$aValue['d_process_2']?></td>
			<td align="center"><?=$aValue['s_process_2_location']?></td>
			<td align="center"><?=$aValue['d_process_3_plan']?></td>
			<td align="center"><?=$aValue['d_process_3']?></td>
			<td align="center"><?=$aValue['s_process_3_location']?></td>
			<td align="center"><?=$aValue['d_process_4_plan']?></td>
			<td align="center"><?=$aValue['d_process_4']?></td>
			<td align="center"><?=$aValue['s_process_4_location']?></td>
			<td align="center"><?=$aValue['d_process_5_plan']?></td>
			<td align="center"><?=$aValue['d_process_5']?></td>
			<td align="center"><?=$aValue['s_process_5_location']?></td>
			<td align="center"><?=$aValue['d_process_6_plan']?></td>
			<td align="center"><?=$aValue['d_process_6']?></td>
			<td align="center"><?=$aValue['s_process_6_location']?></td>
			<td align="center"><?=$aValue['d_process_7_plan']?></td>
			<td align="center"><?=$aValue['d_process_7']?></td>
			<td align="center"><?=$aValue['s_process_7_location']?></td>
			<td align="center"><?=$aValue['d_process_8_plan']?></td>
			<td align="center"><?=$aValue['d_process_8']?></td>
			<td align="center"><?=$aValue['s_process_8_location']?></td>
			<td align="center"><?=$aValue['d_process_9_plan']?></td>
			<td align="center"><?=$aValue['d_process_9']?></td>
			<td align="center"><?=$aValue['s_process_9_location']?></td>
			<td align="center"><?=$aValue['d_process_10_plan']?></td>
			<td align="center"><?=$aValue['d_process_10']?></td>
			<td align="center"><?=$aValue['s_process_10_location']?></td>
			<td align="center"><?=$aValue['d_process_14_plan']?></td>
			<td align="center"><?=$aValue['d_process_14']?></td>
			<td align="center"><?=$aValue['s_process_14_location']?></td>
		</tr>
<?php	}?>
	</tbody>
	<tfoot class="table_footer">
		{tt_report_total}
		<tr><td colspan="12" align="right">&nbsp;</td>
			<td align="right">{n_t_qty}</td>
			<td colspan="33" align="right">&nbsp;</td>
		</tr>
		{/tt_report_total}
	</tfoot>
</table>
<div id='catalogPagination' class="pagination"></div> Total {nTotalRows} rows
<script type="text/javascript">
	$(document).ready(function(){
		//$('#menu').flickrmenu();
        //$('ul.sf-menu').superfish();
    
		var isFirstTime = 1;
		
		// First Parameter: number of items
		// Second Parameter: options object
		var myPageIndex = 1;
		var itemsPerPage = {nRowsPerPage};
		var currentOffset = {nCurrOffset};
		var limit = {nRowsPerPage};
		var currentNode = "";
		var totalItems = {nTotalRows};
		var tmpCurrentPageIndex = currentOffset/itemsPerPage;
		
		$("#catalogPagination").pagination(totalItems, 
			{items_per_page:itemsPerPage, 
			 callback:handlePaginationClick, 
			 current_page:tmpCurrentPageIndex}
		);
	
		function handlePaginationClick(new_page_index, pagination_container) {
			if(!isFirstTime)
			{
				myPageIndex = new_page_index;
				var nextOffset = (itemsPerPage * myPageIndex);
				$("#nOffset").val(nextOffset);
				$("#nLimit").val(limit+currentNode);
				
				$("Offset").val(nextOffset);
				_doPost();
			}
			isFirstTime = 0;
			return false;
		}
	});
	
	function _onPressEnter(fForm, eEvent) {
		var nCode;
		if (!eEvent) var eEvent = window.event;
		if (eEvent.keyCode) 
			nCode = eEvent.keyCode;
		else if (eEvent.which) 
			nCode = eEvent.which;
		if (nCode==13) fForm.submit();
	}
</script>
